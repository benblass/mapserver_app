<!DOCTYPE html>
<html>
<head>
	<title>Test Page - Map retriever</title>
</head>
<body>


<!--
Test Page working with the cherrypy map_server
-->

<script src="js/jquery-2.1.4.min.js"></script>
<script type="text/javascript" src="js/leaflet.js"></script>
<link rel="stylesheet" type="text/css" href="css/leaflet.css"/>
<link rel="stylesheet" type="text/css" href="css/test-page.css"/>

<div id="map_title"></div>
<div id="map_container">
	
</div>

<script type="text/javascript">

	

	var server = '127.0.0.1'
	var port = '8081'
	var areapath= ''

	var display_options = {};
	var area = ''

	$(document).ready(function () {

		$.getJSON('http://'+server+":"+port+'/getparams', function(data){
			
			display_options = data.display_options;
			area = data.area;
			areapath = data.areapath;

		})

		$("#map_title").html("<h1>"+area+"</h1>");

		var map = L.map('map_container').setView(display_options.centercoords, display_options.zoomlevel);

		var tilesPath = 'http://'+server+':'+port+'static/maptiles/'+areapath+'/{z}/{x}/{y}.png';

		L.tileLayer(tilesPath, {maxZoom: display_options.maxZoom, minZoom: display_options.minZoom}).addTo(map);
	};
</script>